---
version: "1.0"
generics:
  - name: ManagementServer
    namespace: Network
    description: "Generic for network management server (dns, ntp, and dhcp)."
    label: "Network Management Servers"
    human_friendly_id:
      - name__value
    display_label: "{{name__value}}"
    order_by: [name__value]
    include_in_menu: false
    attributes:
      - name: name
        kind: Text
      - name: description
        kind: Text
        optional: true
      - name: status
        kind: Dropdown
        choices:
          - name: active
            label: Active
            description: "Fully operational and currently in service."
            color: "#7fbf7f"
          - name: provisioning
            label: Provisioning
            description: "In the process of being set up and configured."
            color: "#ffff7f"
          - name: maintenance
            label: Maintenance
            description: "Undergoing routine maintenance or repairs."
            color: "#ffd27f"
          - name: drained
            label: Drained
            description: "Temporarily taken out of service."
            color: "#bfbfbf"
    relationships:
      - name: location
        peer: LocationGeneric
        optional: true
        cardinality: many
      - name: ip_addresses
        peer: IpamIPAddress
        optional: true
        cardinality: many
        kind: Component
        on_delete: cascade

  - name: Deployment
    namespace: Topology
    include_in_menu: false
    hierarchical: true
    label: Topology Deployment
    human_friendly_id:
      - name__value
    display_label: "{{name__value}}"
    attributes:
      - name: name
        kind: Text
        order_weight: 100

  - name: PhysicalDeployment
    namespace: Topology
    description: "Physical infrastructure deployments with cabling"
    include_in_menu: false
    label: Physical Deployment
    relationships:
      - name: cables
        peer: DcimCable
        kind: Generic
        cardinality: many
        identifier: "physical_deployment__cables"
        order_weight: 2000
        on_delete: cascade

  - name: Design
    namespace: Topology
    description: "Design aspect of topology elements."
    label: "Topology Design"
    include_in_menu: false
    human_friendly_id:
      - name__value
    display_label: "{{name__value}}"
    attributes:
      - name: name
        kind: Text
        unique: true
        order_weight: 100

  - name: RackHosting
    namespace: Topology
    human_friendly_id:
      - name__value
    include_in_menu: false
    attributes:
      - name: name
        kind: Text
        order_weight: 100
    relationships:
      - name: racks
        peer: LocationRack
        kind: Generic
        cardinality: many
        identifier: "rack__pod"
        order_weight: 1200
        on_delete: cascade

  - name: DeviceHosting
    namespace: Topology
    human_friendly_id:
      - name__value
    include_in_menu: false
    attributes:
      - name: name
        kind: Text
        order_weight: 100
    relationships:
      - name: devices
        peer: DcimDevice
        kind: Generic
        cardinality: many
        identifier: "topology__devices"
        order_weight: 1200
        on_delete: cascade

extensions:
  nodes:
    - kind: DcimPhysicalDevice
      relationships:
        - name: deployment
          peer: TopologyDeployment
          cardinality: one
          kind: Attribute
          optional: true
          identifier: "topology__devices"
          order_weight: 1600

    - kind: DcimCable
      relationships:
        - name: deployment
          peer: TopologyPhysicalDeployment
          cardinality: one
          optional: true
          kind: Attribute
          order_weight: 2000
          identifier: "physical_deployment__cables"
