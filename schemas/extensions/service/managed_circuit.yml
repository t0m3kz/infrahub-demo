---
version: "1.0"
nodes:
  - name: PhysicalCircuit
    namespace: Managed
    description: "Managed circuit representing one side of a physical circuit"
    label: "Managed Physical Circuit"
    icon: "mdi:transit-connection-variant"
    include_in_menu: false
    inherit_from:
      - ManagedGeneric
    human_friendly_id:
      - name__value
    display_label: "{{ name__value }}"
    uniqueness_constraints:
      - [name__value]
    attributes:
      - name: name
        kind: Text
        order_weight: 100
      - name: endpoint
        kind: Dropdown
        order_weight: 110
        description: "Circuit endpoint (A or Z side)"
        choices:
          - name: a_side
            label: "A Side"
            description: "A-side endpoint of the circuit (local or primary)"
            color: "#74B9FF"
          - name: z_side
            label: "Z Side"
            description: "Z-side endpoint of the circuit (remote or secondary)"
            color: "#55EFC4"
    relationships:
      - name: topology_circuit
        label: "Topology Physical Circuit"
        peer: TopologyPhysicalCircuit
        cardinality: one
        optional: true
        identifier: "physical_circuit__managed"
        order_weight: 1000
        description: "Topology circuit this managed instance belongs to"
      - name: interface
        label: "Assigned Interface"
        peer: DcimInterface
        cardinality: one
        optional: true
        identifier: interface_services
        order_weight: 1500
        description: "Interface this circuit endpoint terminates on"
      - name: cable
        label: "Structured Cable"
        peer: DcimCable
        cardinality: one
        optional: true
        identifier: "managed_physical_circuit__cable"
        order_weight: 2000
        description: "Cabling connecting circuit termination to device"

  - name: VirtualCircuit
    namespace: Managed
    description: "Managed circuit representing one side of a virtual circuit"
    label: "Managed Virtual Circuit"
    icon: "mdi:transit-connection-variant"
    include_in_menu: false
    inherit_from:
      - ManagedGeneric
      - TopologyVirtualCircuitConnectors
    human_friendly_id:
      - name__value
    display_label: "{{ name__value }}"
    uniqueness_constraints:
      - [name__value]
    attributes:
      - name: name
        kind: Text
        order_weight: 100
      - name: endpoint
        kind: Dropdown
        order_weight: 110
        description: "Circuit endpoint (A or Z side)"
        choices:
          - name: a_side
            label: "A Side"
            description: "A-side endpoint of the circuit (local or primary)"
            color: "#74B9FF"
          - name: z_side
            label: "Z Side"
            description: "Z-side endpoint of the circuit (remote or secondary)"
            color: "#55EFC4"
      - name: vni
        kind: Number
        optional: true
        order_weight: 120
        description: "VXLAN Network Identifier (if applicable)"
      - name: tunnel_id
        kind: Number
        optional: true
        order_weight: 130
        description: "Tunnel ID (for GRE/IPSec, if applicable)"
    relationships:
      - name: topology_circuit
        label: "Topology Virtual Circuit"
        peer: TopologyVirtualCircuit
        cardinality: one
        optional: true
        identifier: "virtual_circuit__connectors"
        order_weight: 1000
        description: "Topology virtual circuit this connector belongs to"
      - name: interface
        label: "Assigned Interface"
        peer: DcimInterface
        cardinality: one
        optional: true
        identifier: interface_services
        order_weight: 1500
        description: "Interface this circuit endpoint terminates on"
