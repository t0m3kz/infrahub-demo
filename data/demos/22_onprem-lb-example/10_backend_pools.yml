# Backend Pools
---
apiVersion: infrahub.app/v1
kind: Object
spec:
  kind: ServiceBackendPool
  data:
    # Web Tier Backend Pool
    - name: "demo-web-pool"
      description: "Demo web tier backend pool"
      load_balancing_algorithm: round_robin
      session_persistence: cookie
      drain_timeout: 300
      vip_service: ["www.demo.local", "https", "443"]
      onprem_servers:
        - ["demo-web-01"]
        - ["demo-web-02"]

    # App Tier Backend Pool
    - name: "demo-app-pool"
      description: "Demo app tier backend pool"
      load_balancing_algorithm: least_connections
      session_persistence: source_ip
      drain_timeout: 300
      vip_service: ["app.demo.local", "tcp", "8080"]
      onprem_servers:
        - ["demo-app-01"]
        - ["demo-app-02"]

    # F5 Web Tier Backend Pool
    - name: "f5-demo-web-pool"
      description: "F5 web tier backend pool"
      load_balancing_algorithm: round_robin
      session_persistence: cookie
      drain_timeout: 300
      vip_service: ["f5-www.demo.local", "https", "443"]
      onprem_servers:
        - ["demo-web-01"]
        - ["demo-web-02"]

    # F5 App Tier Backend Pool (8080)
    - name: "f5-demo-app-pool"
      description: "F5 app tier backend pool"
      load_balancing_algorithm: least_connections
      session_persistence: source_ip
      drain_timeout: 300
      vip_service: ["f5-app.demo.local", "https", "8080"]
      onprem_servers:
        - ["demo-app-01"]
        - ["demo-app-02"]

    # F5 App Tier Backend Pool (8443)
    - name: "f5-demo-app-pool-8443"
      description: "F5 app tier backend pool on port 8443"
      load_balancing_algorithm: least_connections
      session_persistence: source_ip
      drain_timeout: 300
      vip_service: ["f5-app.demo.local", "https", "8443"]
      onprem_servers:
        - ["demo-app-01"]
        - ["demo-app-02"]

    # A10 Web Tier Backend Pool
    - name: "a10-demo-web-pool"
      description: "A10 web tier backend pool"
      load_balancing_algorithm: round_robin
      session_persistence: cookie
      drain_timeout: 300
      vip_service: ["a10-www.demo.local", "https", "443"]
      onprem_servers:
        - ["demo-web-01"]
        - ["demo-web-02"]

    # A10 App Tier Backend Pool (8080)
    - name: "a10-demo-app-pool"
      description: "A10 app tier backend pool"
      load_balancing_algorithm: least_connections
      session_persistence: source_ip
      drain_timeout: 300
      vip_service: ["a10-app.demo.local", "https", "8080"]
      onprem_servers:
        - ["demo-app-01"]
        - ["demo-app-02"]

    # A10 App Tier Backend Pool (8443)
    - name: "a10-demo-app-pool-8443"
      description: "A10 app tier backend pool on port 8443"
      load_balancing_algorithm: least_connections
      session_persistence: source_ip
      drain_timeout: 300
      vip_service: ["app.demo.local", "https", "8443"]
      onprem_servers:
        - ["demo-app-01"]
        - ["demo-app-02"]
