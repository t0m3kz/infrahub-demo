---
apiVersion: infrahub.app/v1
kind: Object
spec:
  kind: ServiceBackendPool
  data:
    # Web Tier Backend Pool
    - name: "demo-web-pool"
      description: "Demo web tier backend pool"
      load_balancing_algorithm: round_robin
      session_persistence: cookie
      drain_timeout: 300
      vip_service: ["www.demo.local", "https", "443"]  # References HTTPS VIP
      onprem_servers:
        - ["demo-web-01"]
        - ["demo-web-02"]

    # App Tier Backend Pool
    - name: "demo-app-pool"
      description: "Demo app tier backend pool"
      load_balancing_algorithm: least_connections
      session_persistence: source_ip
      drain_timeout: 300
      vip_service: ["app.demo.local", "tcp", "8080"]
      onprem_servers:
        - ["demo-app-01"]
        - ["demo-app-02"]
