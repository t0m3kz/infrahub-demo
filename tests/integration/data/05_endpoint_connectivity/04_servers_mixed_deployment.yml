---
# Test servers for MIXED deployment (DC1-1-POD-2 or similar mixed pod)
# Mixed deployment: Servers connect to ToR in same rack,
# fallback to Leaf switches in middle rack
apiVersion: infrahub.app/v1
kind: Object
spec:
  kind: DcimPhysicalDevice
  data:
    # Server-MIXED-01: Mixed deployment, with ToRs available (4x 25G interfaces)
    - name: "server-mixed-01"
      device_type: "PowerEdge-R640"
      role: "endpoint"
      status: "provisioning"
      rack: "ktw-1-s-2-r-1-5"  # Rack with ToR switches
      deployment: "DC1-1-POD-2"
      position: 10
      interfaces:
        - kind: DcimPhysicalInterface
          data:
            name: "eno1"
            interface_type: "25gbase-x-sfp28"
            role: "uplink"
            status: "free"
        - kind: DcimPhysicalInterface
          data:
            name: "eno2"
            interface_type: "25gbase-x-sfp28"
            role: "uplink"
            status: "free"
        - kind: DcimPhysicalInterface
          data:
            name: "eno3"
            interface_type: "25gbase-x-sfp28"
            role: "uplink"
            status: "free"
        - kind: DcimPhysicalInterface
          data:
            name: "eno4"
            interface_type: "25gbase-x-sfp28"
            role: "uplink"
            status: "free"

    # Server-MIXED-02: Mixed deployment, fallback scenario (4x 25G interfaces)
    - name: "server-mixed-02"
      device_type: "PowerEdge-R740"
      role: "endpoint"
      status: "provisioning"
      rack: "ktw-1-s-2-r-1-10"  # Compute rack, will fallback to network rack
      deployment: "DC1-1-POD-2"
      position: 11
      interfaces:
        - kind: DcimPhysicalInterface
          data:
            name: "eno1"
            interface_type: "25gbase-x-sfp28"
            role: "uplink"
            status: "free"
        - kind: DcimPhysicalInterface
          data:
            name: "eno2"
            interface_type: "25gbase-x-sfp28"
            role: "uplink"
            status: "free"
        - kind: DcimPhysicalInterface
          data:
            name: "eno3"
            interface_type: "25gbase-x-sfp28"
            role: "uplink"
            status: "free"
        - kind: DcimPhysicalInterface
          data:
            name: "eno4"
            interface_type: "25gbase-x-sfp28"
            role: "uplink"
            status: "free"
